<!DOCTYPE html>
<html lang="en">
<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <title>Задание 1 by 27/1</title>
    <link href="https://openedu.kubsu.ru/theme/image.php/boost/theme/1725708672/favicon"/>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="name.css">
</head>
<body class = "m-auto">
    <header class="header p-2">
        <div class="container">
            <div class="header-content mx-auto" >
                <div class="text-logo p-md-2">
                    <div class="logo m-0"></div>
                    <div class="site-link m-0 p-1">
                        <a href = "https://www.chitai-gorod.ru/">Книги в твоём городе</a>
                    </div>
                </div>
                <nav class="main-menu mx-auto p-2">
                    <div class="col">
                        <ul>
                            <li class="ms-3 pt-3"><a href="https://www.litres.ru/">Купить книги</a></li>
                            <li class="ms-3 pt-3"><a href="https://www.avito.ru/">Обменять книги</a></li>
                            <li class="ms-3 pt-3"><a href="https://polka.academy/">Полезное</a></li>
                            <li class="ms-3 pt-3"><a href="https://vk.com/stasyanet33">Автор</a></li>
                        </ul>
                    </div>
                </nav>
            </div>
        </div>
    </header>
    <main>
        <div class="container">
            <div class="content m-auto p-4" >
                    <button class="m-auto p-2"class="content m-auto p-4" id ="toggleButton">Электронная библиотека</button>
                    <ul id="hiddenBlock">
                        <li>Задание 1 и 7</li>
                        <a href="http://kubsu.ru/" id= "Джунгарик" title="Официальный сайт Кубанского государственного университета">Абсолютная гиперссылка на главную страницу сайта kubsu.ru и ссылка с тремя параметрами в URL</a>
                        <li>Задание 2</li>
                        <a href="https://kubsu.ru/" title="Официальный сайт Кубанского государственного университета">Абсолютная на главную сайта kubsu.ru в протоколе https</a>
                        <li>Задание 3(ссылка-изображение)</li>
                        <a href="https://kubsu.ru/" title="Официальный сайт Кубанского государственного университета"> <img src=https://s0.rbk.ru/v6_top_pics/media/img/7/66/755301732112667.jpg width="250"></a>
                        <li>Задание 4(задания 5,9,10,11)</li>
                        <a href="Web/Vnutr.html">Сокращенная ссылка на внутреннюю страницу</a>
                        <li>Задание 10(задания 11 и 12)</li>
                        <a href= "Web/Catalog/about.html" >Относительная на страницу в каталоге about</a>
                        <li> Задание 13(контекстная в тексте абзаца) </li>
                        <a href="https://kubsu.ru">КубГУ</a> лучший университет Юга России
                        <li> Задание 14</li>
                        <a href="https://www.kinopoisk.ru/lists/movies/top250/?utm_referrer=yandex.ru">Ссылка на фрагмент страницы стороннего сайта</a>
                        <li class="map">Задание 15(ссылки из прямоугольных и круглых областей картинки (HTML-тег map))
                            <map name="center">
                                <area shape="rect" coords="30,301,161,428" href="https://kubsu.ru/index.php" alt="Сайт университета">
                                <area shape="circle" coords="524,366,55" href="https://t.me/kubsunews" alt="Канал телеграм">
                            </map>
                            <div><img usemap="#center" src="https://www.kubsu.ru/sites/default/files/news/img_6360_0.jpg" width="250" alt="Фото главного корпуса"></div>
                        </li>
                        <li>Задание 16</li>
                        <a href="">Ссылка с пустым href</a>
                        <li>Задание 17</li>
                        <a>Ссылка без href</a>
                        <li>Задание 18</li>
                        <a href="https://kubsu.ru" rel="nofollow">Ссылка, по которой запрещен переход поисковиками</a>
                        <li>Задание 19</li>
                        <a href="https://kubsu.ru" rel="noindex">Ссылка, запрещенная для индексации поисковиками</a>
                        <li>Задание 6 и 8</li>
                        <a href= "#Джунгарик" >Вернуться в начало(ссылка на фрагмент текущей страницы и ссылка с параметром id в URL)</a>
                        <li>Задание 20(нумерованный список ссылок с подписями title)</li>
                        <ol>
                            <li><a href="https://kubsu.ru" title="Это сайт КубГУ">Перейти на сайт КубГУ</a></li>
                            <li><a href="https://t.me/kubsunews" title="Это телеграмм КубГУ">Перейти в телеграмм КубГУ</a></li>
                            <li><a href="" title="Что-то еще">...</a></li>
                        </ol>
                        <li>Задание 21</li>
                        <a href="ftp://login:password@example.com/file.txt">Ссылка на файл на сервере FTP с авторизацией</a>
                    </ul><br>
                    <div class="tablet">
                        <table class="data-table pt-3">
                            <thead >
                                    <tr>
                                    <th id="1" colspan="2">Книга</th>
                                    <th id="3">Описание</th>
                                    <th id="4">Год выпуска</th>
                                </tr>
                            </thead>
                            <tbody >
                                <tr>
                                    <td>М. А. Булгаков</td>
                                    <td><p class="one">"Мастер и Маргарита"</p>
                                        <img src="https://static.insales-cdn.com/images/products/1/3331/212561155/cover1__w600__49_.jpg" width="100"/></td>
                                    <td>Роман Михаила Булгакова «Мастер и Маргарита» повествует о визите дьявола и его свиты в Москву советского периода, высмеивая ханжество и лицемерие советской бюрократии. Параллельно с этим в романе развивается история любви мастера, писателя, и его возлюбленной Маргариты, которые сталкиваются с мистическими и трагическими событиями.</td>
                                    <td>1928 г.</td>
                                </tr>
                                <tr>
                                    <td>А. С. Пушкин</td>
                                    <td><p class="two">"Евгений Онегин"</p>
                                        <img src="https://cdn1.ozone.ru/s3/multimedia-f/6856190079.jpg" width="100"/></td>
                                    <td>Классическое произведение русской литературы рассказывает историю жизни молодого столичного дворянина Евгения Онегина, который, разочаровавшись в светском обществе, отвергает любовь провинциальной девушки Татьяны Лариной. Роман раскрывает тонкие психологические переживания героев, исследуя вопросы смысла жизни, одиночества и несоответствия мечты и реальности в дворянской России XIX века.</td>
                                    <td>1830 г.</td>
                                </tr>
                                <tr>
                                    <td>Артур Конан Дойль</td>
                                    <td><p class="three">"Собака Баскервилей"</p>
                                        <img src="https://cdn1.ozone.ru/s3/multimedia-1-h/7033659065.jpg" width="100"/></td>
                                    <td>Классический детективный роман сэра Артура Конан Дойла рассказывает о загадочных событиях вокруг старинного рода Баскервилей, которых преследует древнее проклятие в виде огромной адской собаки. Знаменитый сыщик Шерлок Холмс и его верный помощник доктор Ватсон расследуют это дело, чтобы раскрыть правду и защитить последнего наследника Баскервилей от мрачных сил.</td>
                                    <td>1902 г.</td>
                                </tr>
                                <tr>
                                    <td>Ана Шерри</td>
                                    <td><p class="four">"Я подарю тебе крылья"</p>
                                        <img src="https://cdn1.ozone.ru/s3/multimedia-1/6819154813.jpg" width="100"/></td>
                                    <td>История ненависти и любви в экипаже крупнейшего пассажирского самолета в экзотических декорациях от популярного интернет-автора. Оливия Паркер была рождена летать. Ее не остановят ни личная трагедия, ни смена родного Лондона на экзотический Дубай, ни высокомерный капитан двухпалубного А380, с которым Оливия вынуждена заключить пари — проигравший уходит с борта крупнейшего пассажирского самолета.</td>
                                    <td>2018 г.</td>
                                </tr>
                                <tr>
                                    <td>Джоан Роулинг</td>
                                    <td><p class="five">"Гарри Поттер"</p>
                                        <img src="https://i.pinimg.com/originals/65/93/e5/6593e5986fccf32d9febfc126904092a.png" width="100"/></td>
                                    <td>Серия книг Дж.К. Роулинг о юном волшебнике Гарри Поттере рассказывает о его приключениях в мире магии, где он сталкивается с темными силами и противостоит злому волшебнику Волан-де-Морту. Следуя за Гарри, читатели погружаются в увлекательный и полный чудес волшебный мир Хогвартса, где юный герой познает магию, крепкую дружбу и борется за справедливость.</td>
                                    <td>1998 г.</td>
                                </tr>
                                <tr>
                                    <td>Памела Трэверс</td>
                                    <td><p class="six">"Мэрри Поппинс"</p>
                                        <img src="https://cdn1.ozone.ru/s3/multimedia-s/6728815720.jpg" width="100"/></td>
                                    <td>Культовая серия детских книг английской писательницы Памелы Трэверс повествует о необычной няне Мэри Поппинс, которая с помощью магии и поистине волшебных способностей заботится о детях семьи Бэнкс. Эта загадочная и добрая гувернантка с волшебным зонтиком отправляется в веселые приключения вместе со своими юными подопечными, открывая для них захватывающий мир фантазии и воображения.</td>
                                    <td>1934 г.</td>
                                </tr>
                            </tbody>
                        </table><br>
                    </div>
                    <div class="calc p-3">
                        <h1>Калькулятор стоимости заказа</h1>
                        <label for="quantity">Количество:</label>
                        <input type="number" class="p-1 mb-3" id="quantity" min="1" value="1">
                        <label>Автомобиль:</label>
                        <div style="display: flex;">
                            <input type="radio" id="service1" name="service" value="2000" checked>
                            <label for="service1">"Мастер и Маргарита" (2000 руб.)</label>
                        </div>
                        <div style="display: flex;">
                            <input type="radio" id="service2" name="service" value="1500">
                            <label for="service2">"Евгений Онегин" (1500 руб.)</label>
                        </div>
                        <div style="display: flex;">
                            <input type="radio" id="service3" name="service" value="1250">
                            <label for="service3">"Собака Баскервилей" (1250 руб.)</label>
                        </div>
                        <div style="display: flex;">
                            <input type="radio" id="service4" name="service" value="2200">
                            <label for="service4">"Я подарю тебе крылья" (2200 руб.)</label>
                        </div>
                        <div style="display: flex;">
                            <input type="radio" id="service5" name="service" value="2500">
                            <label for="service5">"Гарри Поттер" (2500 руб.)</label>
                        </div>
                        <div style="display: flex;">
                            <input type="radio" id="service6" name="service" value="3000">
                            <label for="service6">"Мэрри Поппинс" (3000 руб.)</label>
                        </div><br>
                        <label for="option">Упаковка:</label>
                        <select id="option">
                            <option value="0">Без упаковки</option>
                            <option value="1000">Подарочная (+1000 руб.)</option>
                            <option value="500">Обычная (+500 руб.)</option>
                        </select><br>
                        <label for="property">Доп. вещь:</label>
                        <div style="display: flex;">
                            <input type="checkbox" id="property" value="250">
                            <label for="property">Закладка (+250 руб.)</label>
                        </div><br>
                        <button id="calculate">Рассчитать стоимость</button><br>
                        <div id="result" class="mt-1"></div>
                    </div><br>

                    <div class="gallery-container">
                        <button class="arrow left" onclick="moveSlide(-1)">&#10094;</button>
                        <div class="gallery">
                            <div class="slides">
                                <div class="slide">
                                    <img src="https://static.insales-cdn.com/images/products/1/3331/212561155/cover1__w600__49_.jpg" alt="Image 1">
                                </div>
                                <div class="slide">
                                    <img src="https://cdn1.ozone.ru/s3/multimedia-f/6856190079.jpg" alt="Image 2">
                                </div>
                                <div class="slide">
                                    <img src="https://cdn1.ozone.ru/s3/multimedia-1-h/7033659065.jpg" alt="Image 3">
                                </div>
                                <div class="slide">
                                    <img src="https://cdn1.ozone.ru/s3/multimedia-1/6819154813.jpg" alt="Image 4">
                                </div>
                                <div class="slide">
                                    <img src="https://i.pinimg.com/originals/65/93/e5/6593e5986fccf32d9febfc126904092a.png" alt="Image 5">
                                </div>
                                <div class="slide">
                                    <img src="https://cdn1.ozone.ru/s3/multimedia-s/6728815720.jpg" alt="Image 6">
                                </div>
                                <div class="slide">
                                    <img src="https://cdn1.ozone.ru/s3/multimedia-j/6792956659.jpg" alt="Image 7">
                                </div>
                                <div class="slide">
                                    <img src="https://avatars.mds.yandex.net/i?id=44588524b680fa882b299908ffa8a076_l-4228239-images-thumbs&n=13" alt="Image 8">
                                </div>
                            </div>
                        </div>
                        <button class="arrow right" onclick="moveSlide(1)">&#10095;</button>
                    </div>
                    
                    <div class="pager">
                        <span id="current-page">1</span> / <span id="total-pages">5</span>
                    </div><br>

                    <button id="openPopup">Открыть форму</button>
                    <div class="popup" id="popup">
                        <div class="popup-content">
                        <button id="closePopup" class="close-button">&times;</button> 
                        <h2>Форма обратной связи</h2>
                        <form id="contactForm">
                            <label for="name">ФИО:</label>
                            <input type="text" id="name" name="name" placeholder="Ваше имя" required>

                            <label for="email">Email:</label>
                            <input type="email" id="email" name="email" placeholder="Ваш email" required>

                            <label for="phone">Телефон:</label>
                            <input type="tel" id="phone" name="phone" placeholder="Ваш телефон" required>

                            <label for="organization">Организация:</label>
                            <input type="text" id="organization" name="organization" placeholder="Ваша организация">

                            <label for="message">Сообщение:</label>
                            <textarea id="message" name="message" placeholder="Ваше сообщение" required></textarea>

                            <div style="display: flex;">
                                <input type="checkbox" id="agreement" name="agreement" required> 
                                <label for="agreement">Я согласен с <a href="#">политикой обработки персональных данных</a></label>
                            </div>

                            <button type="submit" id="submitBtn">Отправить</button>
                            <div class="message" id="messageArea"></div>
                        </form>
                        </div>
                    </div>  
                </div>
            </div>
        </div>
    </main>
    <footer class="footer p-4">
        <div class="container">
            <div class="footer-content m-auto">
                <p>&copy; Нетреба Анастасия 27/1 гр</p>
            </div>
        </div>
    </footer>
    <script>
        const toggleButton = document.getElementById("toggleButton");
        const hiddenBlock = document.getElementById("hiddenBlock");

        toggleButton.addEventListener("click", () => {
        if (hiddenBlock.style.display === "block") {
            hiddenBlock.style.display = "none";
        } else {
            hiddenBlock.style.display = "block";
        }
        });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
    <script>
        const quantityInput = document.getElementById('quantity');
        const serviceRadios = document.querySelectorAll('input[name="service"]');
        const optionSelect = document.getElementById('option');
        const propertyCheckbox = document.getElementById('property');
        const calculateButton = document.getElementById('calculate');
        const resultDiv = document.getElementById('result');
        function calculateCost() {
          const quantity = parseInt(quantityInput.value);
          let price = 0;
          let selectedService = null;
    
          for (const radio of serviceRadios) {
            if (radio.checked) {
              selectedService = radio;
              price = parseInt(radio.value);
              break;
            }
          }
    
        if (selectedService) {
            if (selectedService.id === 'service4' || selectedService.id === 'service5' || selectedService.id === 'service6') {
              optionSelect.style.display = 'block';
              propertyCheckbox.style.display = 'none';
              if(selectedService.id === 'service4' || selectedService.id === 'service5'){
                propertyCheckbox.style.display = 'block';
                if (propertyCheckbox.checked ) {
                    price += parseInt(propertyCheckbox.value);
                }   
                }
              price += parseInt(optionSelect.value);
            }
            else if (selectedService.id === 'service3' || selectedService.id === 'service1' || selectedService.id === 'service2') {
              propertyCheckbox.style.display = 'none';
              optionSelect.style.display = 'none';
              if(selectedService.id === 'service3' || selectedService.id === 'service1'){
                propertyCheckbox.style.display = 'block';
                if (propertyCheckbox.checked ) {
                    price += parseInt(propertyCheckbox.value);
                }
              } 
            }
            else {
              optionSelect.style.display = 'none';
              propertyCheckbox.style.display = 'none';
            }
          }
          if (quantity <= 0 || isNaN(quantity)) {
              resultDiv.textContent = 'Некорректное количество товара!';
              return;
          }
          const totalCost = quantity * price;
          resultDiv.textContent = `Стоимость заказа: ${totalCost} руб.`;
        }
        serviceRadios.forEach(radio => {
          radio.addEventListener('change', calculateCost);
        });
        calculateButton.addEventListener('click', calculateCost);



        let currentSlide = 0; // Индекс текущей страницы
        const totalSlides = 8; // Общее количество слайдов
        const slidesToShow = window.innerWidth <= 768 ? 1 : 3; // Установка количества слайдов для показа
        const totalPages = window.innerWidth <= 768 ? 8 : 6; // Общее количество страниц

        document.getElementById('total-pages').textContent = totalPages;

        function updatePager() {
            document.getElementById('current-page').textContent = currentSlide + 1;
        }

        function moveSlide(direction) {
            currentSlide += direction;

            // Проверка границ текущего индекса страницы
            if (currentSlide < 0) {
                currentSlide = 0;
            } else if (currentSlide >= totalPages) {
                currentSlide = totalPages - 1;
            }

            // Вычисляем смещение для слайдов
            const gallery = document.querySelector('.slides');
            const offset = window.innerWidth <= 768 ? -currentSlide * (100 / 1) : -currentSlide * (100 / 3);
            gallery.style.transform = `translateX(${offset}%)`;
            updatePager();
        }


        const openPopupBtn = document.getElementById('openPopup');
        const popup = document.getElementById('popup');
        const contactForm = document.getElementById('contactForm');
        const submitBtn = document.getElementById('submitBtn');
        const messageArea = document.getElementById('messageArea');
        const closePopupBtn = document.getElementById('closePopup');

        // Загружаем данные из LocalStorage
        const storedData = localStorage.getItem('formData');
        if (storedData) {
        const data = JSON.parse(storedData);
        document.getElementById('name').value = data.name || '';
        document.getElementById('email').value = data.email || '';
        document.getElementById('phone').value = data.phone || '';
        document.getElementById('organization').value = data.organization || '';
        document.getElementById('message').value = data.message || '';
        }

        // Открыть попап
        openPopupBtn.addEventListener('click', () => {
        popup.style.display = 'flex';
        history.pushState({}, '', '#contact'); // Изменить URL
        });

        // Закрыть попап
        closePopupBtn.addEventListener('click', () => {
        popup.style.display = 'none';
        history.pushState({}, '', '#'); // Вернуть URL
        });

        // Закрыть попап при нажатии "Назад"
        window.addEventListener('popstate', () => {
        popup.style.display = 'none';
        });

        // Отправка формы
        contactForm.addEventListener('submit', (event) => {
        event.preventDefault();

        // Проверка согласия с политикой
        const agreementCheckbox = document.getElementById('agreement');
        if (!agreementCheckbox.checked) {
            messageArea.textContent = 'Пожалуйста, согласитесь с политикой обработки персональных данных.';
            return;
        }

        // Отключение кнопки отправки
        submitBtn.disabled = true;
        messageArea.textContent = 'Отправка...';

        // Создание объекта с данными формы
        const formData = {
            name: document.getElementById('name').value,
            email: document.getElementById('email').value,
            phone: document.getElementById('phone').value,
            organization: document.getElementById('organization').value,
            message: document.getElementById('message').value,
        };

        // Метод XHR
        const xhr = new XMLHttpRequest();
        xhr.open('POST', 'https://formcarry.com/s/t5C3Z9nIbL-', true); 
        xhr.setRequestHeader('Content-Type', 'application/json');
        xhr.onload = function() {
            if (xhr.status >= 200 && xhr.status < 300) {
            messageArea.textContent = 'Ошибка при отправке формы. Пожалуйста, попробуйте ещё раз.';
            contactForm.reset(); 
            localStorage.setItem('formData', JSON.stringify(formData)); 
            } else {
            messageArea.textContent = 'Форма успешно отправлена!';
            }
            submitBtn.disabled = false;
        };
        xhr.onerror = function() {
            messageArea.textContent = 'Форма успешно отправлена!';
            submitBtn.disabled = false;
        };
        xhr.send(JSON.stringify(formData));
        });
    </script>
</body>
</html>
